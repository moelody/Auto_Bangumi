import{a as N,_ as S,u as j}from"./bangumi-b4aac534.js";import{_ as T}from"./ab-button-5874cf85.js";import{b as t,d as $,P as I,z as V,B as Z,C as P,l as D,o as f,i as E,w as p,g as i,c as w,a as l,E as m,t as H,M as Y,Q as q,F as Q,h as G,n as J}from"./index-ce25b577.js";import{I as B}from"./ab-setting.vue_vue_type_script_setup_true_lang-8c5ee8cf.js";import"./ab-container.vue_vue_type_script_setup_true_lang-87df8472.js";const K=B("error-picture",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M44 23.9941C44 22.8896 43.1046 21.9941 42 21.9941C40.8954 21.9941 40 22.8896 40 23.9941H44ZM24 7.99414C25.1046 7.99414 26 7.09871 26 5.99414C26 4.88957 25.1046 3.99414 24 3.99414V7.99414ZM39 39.9941H9V43.9941H39V39.9941ZM8 38.9941V8.99414H4V38.9941H8ZM40 23.9941V38.9941H44V23.9941H40ZM9 7.99414H24V3.99414H9V7.99414ZM9 39.9941C8.44772 39.9941 8 39.5464 8 38.9941H4C4 41.7556 6.23857 43.9941 9 43.9941V39.9941ZM39 43.9941C41.7614 43.9941 44 41.7556 44 38.9941H40C40 39.5464 39.5523 39.9941 39 39.9941V43.9941ZM8 8.99414C8 8.44186 8.44771 7.99414 9 7.99414V3.99414C6.23858 3.99414 4 6.23272 4 8.99414H8Z",fill:e.colors[0]},null),t("path",{d:"M6 35L16.6931 25.198C17.4389 24.5143 18.5779 24.4953 19.3461 25.1538L32 36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 31L32.7735 26.2265C33.4772 25.5228 34.5914 25.4436 35.3877 26.0408L42 31",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M33 7L41 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M41 7L33 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),O=B("write",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M5.32497 43.4996L13.81 43.4998L44.9227 12.3871L36.4374 3.90186L5.32471 35.0146L5.32497 43.4996Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27.9521 12.3872L36.4374 20.8725",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),X={key:0},ee=l("div",null,"Do you want to enable this rule?",-1),te=l("div",{line:"","my-8px":""},null,-1),se={"fx-cer":"","justify-center":"","space-x-10px":""},oe={key:1,"space-y-12px":""},le={"fx-cer":"","justify-end":"","space-x-10px":""},ne=l("div",null,"Delete Local File?",-1),ie=l("div",{line:"","my-8px":""},null,-1),ae={"fx-cer":"","justify-center":"","space-x-10px":""},re=$({__name:"ab-edit-rule",props:{show:{default:!1},rule:{required:!0}},emits:I(["apply","enable","deleteFile"],["update:show","update:rule"]),setup(e,{emit:a}){const r=V(e,"show"),u=V(e,"rule"),_=Z({show:!1,type:"disable"});P(r,k=>{k||(_.show=!1)});const x=k=>{_.show=!0,_.type=k},C=()=>r.value=!1;function d(k){a("deleteFile",_.type,{id:u.value.id,deleteFile:k})}function L(){a("apply",u.value)}function v(){a("enable",u.value.id)}const R=D(()=>u.value.deleted?"Enable Rule":"Edit Rule"),M=D(()=>u.value.deleted?"w-300px":"w-380px");return(k,s)=>{const c=T,z=S,y=N;return f(),E(y,{show:r.value,"onUpdate:show":s[8]||(s[8]=h=>r.value=h),title:i(R),css:i(M)},{default:p(()=>[u.value.deleted?(f(),w("div",X,[ee,te,l("div",se,[t(c,{size:"small",type:"warn",onClick:s[0]||(s[0]=()=>v())},{default:p(()=>[m("Yes")]),_:1}),t(c,{size:"small",onClick:s[1]||(s[1]=()=>C())},{default:p(()=>[m("No")]),_:1})])])):(f(),w("div",oe,[t(z,{rule:u.value,"onUpdate:rule":s[2]||(s[2]=h=>u.value=h)},null,8,["rule"]),l("div",le,[t(c,{size:"small",type:"warn",onClick:s[3]||(s[3]=()=>x("disable"))},{default:p(()=>[m("Disable")]),_:1}),t(c,{size:"small",type:"warn",onClick:s[4]||(s[4]=()=>x("delete"))},{default:p(()=>[m("Delete")]),_:1}),t(c,{size:"small",onClick:L},{default:p(()=>[m("Apply")]),_:1})])])),t(y,{show:i(_).show,"onUpdate:show":s[7]||(s[7]=h=>i(_).show=h),title:"Delete"},{default:p(()=>[ne,ie,l("div",ae,[t(c,{size:"small",type:"warn",onClick:s[5]||(s[5]=()=>d(!0))},{default:p(()=>[m("Yes")]),_:1}),t(c,{size:"small",onClick:s[6]||(s[6]=()=>d(!1))},{default:p(()=>[m("No")]),_:1})])]),_:1},8,["show"])]),_:1},8,["show","title","css"])}}}),ue={"rounded-4px":"","overflow-hidden":"","poster-shandow":"",rel:""},de={"w-full":"","h-210px":""},ce=["src"],pe={key:1,"wh-full":"","f-cer":"",border:"1 white"},fe={abs:"","f-cer":"","z-1":"","inset-0":"","opacity-0":"","transition-all":"","duration-300":"","hover:backdrop-blur-2px":"","hover:bg-white":"","hover:bg-opacity-30":"","hover:opacity-100":"","active:duration-0":"","active:bg-opacity-60":"",class:"group"},_e={"text-white":"",rounded:"1/2","wh-44px":"","f-cer":"","bg-theme-row":"",class:"group-active:poster-pen-active"},ke={"px-4px":"","py-8px":""},he={"text-h3":"",truncate:""},me={"text-main":""},we=$({__name:"ab-bangumi-card",props:{poster:{},name:{},season:{}},emits:["click"],setup(e){return(a,r)=>(f(),w("div",{"w-150px":"","is-btn":"",onClick:r[0]||(r[0]=()=>a.$emit("click"))},[l("div",ue,[l("div",de,[a.poster!==""?(f(),w("img",{key:0,src:`https://mikanani.me${a.poster}`,alt:"poster","wh-full":""},null,8,ce)):(f(),w("div",pe,[t(i(K),{theme:"outline",size:"24",fill:"#333"})]))]),l("div",fe,[l("div",_e,[t(i(O),{size:"20"})])])]),l("div",ke,[l("div",he,H(a.name),1),l("div",me,"Season "+H(a.season),1)])]))}}),ve={flex:"~ wrap","gap-y-12px":"","gap-x-50px":""},Le=$({__name:"bangumi",setup(e){const{data:a}=Y(j()),{getAll:r,useUpdateRule:u,useDisableRule:_,useEnableRule:x,useDeleteRule:C}=j(),d=Z({show:!1,item:{added:!1,deleted:!1,dpi:"",eps_collect:!1,filter:[],group_name:"",id:0,official_title:"",offset:0,poster_link:"",rss_link:[],rule_name:"",save_path:"",season:1,season_raw:"",source:null,subtitle:"",title_raw:"",year:null}});function L(b){d.show=!0,d.item=b}function v(){d.show=!1,r()}const{execute:R,onResult:M}=u(),{execute:k,onResult:s}=x(),{execute:c,onResult:z}=_(),{execute:y,onResult:h}=C();M(()=>{v()}),z(()=>{v()}),s(()=>{v()}),h(()=>{v()}),q(()=>{r()});function F(b,n,g){b==="disable"&&c(n,g),b==="delete"&&y(n,g)}return(b,n)=>{const g=we,W=re;return f(),w("div",ve,[(f(!0),w(Q,null,G(i(a),o=>(f(),E(g,{key:o.id,class:J([o.deleted&&"grayscale"]),poster:o.poster_link??"",name:o.official_title,season:o.season,onClick:()=>L(o)},null,8,["class","poster","name","season","onClick"]))),128)),t(W,{show:i(d).show,"onUpdate:show":n[0]||(n[0]=o=>i(d).show=o),rule:i(d).item,"onUpdate:rule":n[1]||(n[1]=o=>i(d).item=o),onEnable:n[2]||(n[2]=o=>i(k)(o)),onDeleteFile:n[3]||(n[3]=(o,{id:U,deleteFile:A})=>F(o,U,A)),onApply:n[4]||(n[4]=o=>i(R)(o))},null,8,["show","rule"])])}}});export{Le as default};
