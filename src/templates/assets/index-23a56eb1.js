import{d as p,o as g,c as I,a as m,t as N,b as n,r as L,u as he,e as O,f as ne,n as P,g as _,F as oe,h as ie,w as y,i as W,j as Z,k as le,l as z,p as ke,m as q,q as se,s as $,v as fe,x as R,y as J,z as ae,A as ve,B as Q,C as me,D as H,E as T,G,H as X,I as we,J as _e,K as ge,L as A,M as be,N as xe,O as Le}from"./index-ce25b577.js";import{I as j,m as Ce,y as je,w as ye,h as Me,o as C,c as pe,u as Se,l as E,H as F,t as K,b as Ie,p as Re,N as Y,a as We,x as ze,d as S,e as x,v as Pe,f as ee,_ as re,O as $e,g as Be}from"./ab-setting.vue_vue_type_script_setup_true_lang-8c5ee8cf.js";import{u as Ae,_ as Ve,a as ue}from"./bangumi-b4aac534.js";import{_ as ce,a as He}from"./ab-button-5874cf85.js";import"./ab-container.vue_vue_type_script_setup_true_lang-87df8472.js";const Te={"fx-cer":"","space-x-12px":""},Ee={"text-h1":""},Fe=m("div",{"w-160px":"","h-3px":"","bg-theme-row":"","rounded-full":""},null,-1),De=p({__name:"ab-page-title",props:{title:{default:"title"}},setup(e){return(s,l)=>(g(),I("div",Te,[m("div",Ee,N(s.title),1),Fe]))}}),Ue=j("add-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 16V32",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 24L32 24",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ne=j("calendar",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M5 19H43V40C43 41.1046 42.1046 42 41 42H7C5.89543 42 5 41.1046 5 40V19Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M5 9C5 7.89543 5.89543 7 7 7H41C42.1046 7 43 7.89543 43 9V19H5V9Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 4V12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M32 4V12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M28 34H34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M14 34H20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M28 26H34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M14 26H20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Oe=j("download",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M6 24.0083V42H42V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33 23L24 32L15 23",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M23.9917 6V32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ze=j("home",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 29V42H29V29H19Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M9 42H39",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Ke=j("log",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("rect",{x:"13",y:"10",width:"28",height:"34",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M35 10V4H8C7.44772 4 7 4.44772 7 5V38H13",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M21 22H33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M21 30H33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),qe=j("logout",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33 33L42 24L33 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 23.9917H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Je=j("me",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 23C26.7614 23 29 20.7614 29 18C29 15.2386 26.7614 13 24 13C21.2386 13 19 15.2386 19 18C19 20.7614 21.2386 23 24 23Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M10.022 38.332C10.3657 33.1206 14.7016 29 20 29H28C33.2914 29 37.6229 33.1097 37.9767 38.3113",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Qe=j("menu-unfold",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M8 11H40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M8 24H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M8 37H40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M36.3433 29.6568L42.0001 23.9999L36.3433 18.343",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ge=j("more",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("circle",{cx:"12",cy:"24",r:"3",fill:e.colors[0]},null),n("circle",{cx:"24",cy:"24",r:"3",fill:e.colors[0]},null),n("circle",{cx:"36",cy:"24",r:"3",fill:e.colors[0]},null)])}),Xe=j("pause",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M16 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M32 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ye=j("play",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),et=j("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),tt=j("power",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M14.5 8C13.8406 8.37652 13.2062 8.79103 12.6 9.24051C11.5625 10.0097 10.6074 10.8814 9.75 11.8402C6.79377 15.1463 5 19.4891 5 24.2455C5 34.6033 13.5066 43 24 43C34.4934 43 43 34.6033 43 24.2455C43 19.4891 41.2062 15.1463 38.25 11.8402C37.3926 10.8814 36.4375 10.0097 35.4 9.24051C34.7938 8.79103 34.1594 8.37652 33.5 8",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 4V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),nt=j("refresh",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M42 8V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M6 24L6 40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M42 24C42 14.0589 33.9411 6 24 6C18.9145 6 14.3216 8.10896 11.0481 11.5M6 24C6 33.9411 14.0589 42 24 42C28.8556 42 33.2622 40.0774 36.5 36.9519",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ot=j("search",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M21 38C30.3888 38 38 30.3888 38 21C38 11.6112 30.3888 4 21 4C11.6112 4 4 11.6112 4 21C4 30.3888 11.6112 38 21 38Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M26.657 14.3431C25.2093 12.8954 23.2093 12 21.0001 12C18.791 12 16.791 12.8954 15.3433 14.3431",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33.2216 33.2217L41.7069 41.707",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),it=j("setting-two",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M18.2838 43.1713C14.9327 42.1736 11.9498 40.3213 9.58787 37.867C10.469 36.8227 11 35.4734 11 34.0001C11 30.6864 8.31371 28.0001 5 28.0001C4.79955 28.0001 4.60139 28.01 4.40599 28.0292C4.13979 26.7277 4 25.3803 4 24.0001C4 21.9095 4.32077 19.8938 4.91579 17.9995C4.94381 17.9999 4.97188 18.0001 5 18.0001C8.31371 18.0001 11 15.3138 11 12.0001C11 11.0488 10.7786 10.1493 10.3846 9.35011C12.6975 7.1995 15.5205 5.59002 18.6521 4.72314C19.6444 6.66819 21.6667 8.00013 24 8.00013C26.3333 8.00013 28.3556 6.66819 29.3479 4.72314C32.4795 5.59002 35.3025 7.1995 37.6154 9.35011C37.2214 10.1493 37 11.0488 37 12.0001C37 15.3138 39.6863 18.0001 43 18.0001C43.0281 18.0001 43.0562 17.9999 43.0842 17.9995C43.6792 19.8938 44 21.9095 44 24.0001C44 25.3803 43.8602 26.7277 43.594 28.0292C43.3986 28.01 43.2005 28.0001 43 28.0001C39.6863 28.0001 37 30.6864 37 34.0001C37 35.4734 37.531 36.8227 38.4121 37.867C36.0502 40.3213 33.0673 42.1736 29.7162 43.1713C28.9428 40.752 26.676 39.0001 24 39.0001C21.324 39.0001 19.0572 40.752 18.2838 43.1713Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 31C27.866 31 31 27.866 31 24C31 20.134 27.866 17 24 17C20.134 17 17 20.134 17 24C17 27.866 20.134 31 24 31Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),lt={"overflow-hidden":"","wh-full":"",flex:"~ col"},st=m("div",{"text-h1":""},"Menu",-1),at=[st],rt={"text-h2":""},ut=m("div",{"text-h2":""},"Logout",-1),ct=p({__name:"ab-sidebar",props:{open:{type:Boolean,default:!1}},setup(e){const l=L(e.open),r=()=>l.value=!l.value,t=he(),{logout:i}=O(),u=[{id:1,icon:Ze,label:"HomePage",path:"/bangumi"},{id:2,icon:Ne,label:"Calendar",path:"/calendar",hidden:!0},{id:3,icon:Ye,label:"Player",path:"/player"},{id:4,icon:Oe,label:"Downloader",path:"/downloader",hidden:!0},{id:5,icon:Ke,label:"Log",path:"/log"},{id:6,icon:it,label:"Config",path:"/config"}];return(k,f)=>{const h=ne("RouterLink");return g(),I("div",{class:P([_(l)?"w-240px":"w-72px"]),"bg-theme-col":"","text-white":"","transition-width":"","pb-12px":"","rounded-12px":""},[m("div",lt,[m("div",{"w-full":"","h-60px":"","is-btn":"","f-cer":"","rounded-t-10px":"",bg:"#E7E7E7",text:"#2A1C52",rel:"",onClick:r},[m("div",{class:P([!_(l)&&"abs opacity-0"]),"transition-opacity":""},at,2),n(_(Qe),{theme:"outline",size:"24",fill:"#2A1C52",abs:"",left:"24px",class:P([_(l)&&"rotate-y-180"])},null,8,["class"])]),(g(),I(oe,null,ie(u,o=>n(h,{key:o.id,to:o.path,replace:"",title:o.label,"fx-cer":"","px-24px":"","space-x-42px":"","h-48px":"","is-btn":"","transition-colors":"","hover:bg":"#F1F5FA","hover:text":"#2A1C52",class:P([_(t).path===o.path&&"bg-[#F1F5FA] text-[#2A1C52]",o.hidden&&"hidden"])},{default:y(()=>[(g(),W(Z(o.icon),{size:24})),m("div",rt,N(o.label),1)]),_:2},1032,["to","title","class"])),64)),m("div",{title:"logout","mt-auto":"","fx-cer":"","px-24px":"","space-x-42px":"","h-48px":"","is-btn":"","transition-colors":"","hover:bg":"#F1F5FA","hover:text":"#2A1C52",onClick:f[0]||(f[0]=(...o)=>_(i)&&_(i)(...o))},[n(_(qe),{size:24}),ut])])],2)}}});function dt({container:e,accept:s,walk:l,enabled:r}){le(()=>{let t=e.value;if(!t||r!==void 0&&!r.value)return;let i=Ce(e);if(!i)return;let u=Object.assign(f=>s(f),{acceptNode:s}),k=i.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,u,!1);for(;k.nextNode();)l(k.currentNode)})}var ht=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ht||{}),kt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(kt||{});function ft(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let de=Symbol("MenuContext");function D(e){let s=fe(de,null);if(s===null){let l=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,D),l}return s}let vt=p({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:s,attrs:l}){let r=L(1),t=L(null),i=L(null),u=L([]),k=L(""),f=L(null),h=L(1);function o(d=c=>c){let c=f.value!==null?u.value[f.value]:null,a=$e(d(u.value.slice()),b=>C(b.dataRef.domRef)),w=c?a.indexOf(c):null;return w===-1&&(w=null),{items:a,activeItemIndex:w}}let v={menuState:r,buttonRef:t,itemsRef:i,items:u,searchQuery:k,activeItemIndex:f,activationTrigger:h,closeMenu:()=>{r.value=1,f.value=null},openMenu:()=>r.value=0,goToItem(d,c,a){let w=o(),b=ze(d===S.Specific?{focus:S.Specific,id:c}:{focus:d},{resolveItems:()=>w.items,resolveActiveIndex:()=>w.activeItemIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});k.value="",f.value=b,h.value=a??1,u.value=w.items},search(d){let c=k.value!==""?0:1;k.value+=d.toLowerCase();let a=(f.value!==null?u.value.slice(f.value+c).concat(u.value.slice(0,f.value+c)):u.value).find(b=>b.dataRef.textValue.startsWith(k.value)&&!b.dataRef.disabled),w=a?u.value.indexOf(a):-1;w===-1||w===f.value||(f.value=w,h.value=1)},clearSearch(){k.value=""},registerItem(d,c){let a=o(w=>[...w,{id:d,dataRef:c}]);u.value=a.items,f.value=a.activeItemIndex,h.value=1},unregisterItem(d){let c=o(a=>{let w=a.findIndex(b=>b.id===d);return w!==-1&&a.splice(w,1),a});u.value=c.items,f.value=c.activeItemIndex,h.value=1}};return je([t,i],(d,c)=>{var a;v.closeMenu(),ye(c,Me.Loose)||(d.preventDefault(),(a=C(t))==null||a.focus())},z(()=>r.value===0)),ke(de,v),pe(z(()=>Se(r.value,{[0]:E.Open,[1]:E.Closed}))),()=>{let d={open:r.value===0,close:v.closeMenu};return F({ourProps:{},theirProps:e,slot:d,slots:s,attrs:l,name:"Menu"})}}}),mt=p({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${K()}`}},setup(e,{attrs:s,slots:l,expose:r}){let t=D("MenuButton");r({el:t.buttonRef,$el:t.buttonRef});function i(h){switch(h.key){case x.Space:case x.Enter:case x.ArrowDown:h.preventDefault(),h.stopPropagation(),t.openMenu(),$(()=>{var o;(o=C(t.itemsRef))==null||o.focus({preventScroll:!0}),t.goToItem(S.First)});break;case x.ArrowUp:h.preventDefault(),h.stopPropagation(),t.openMenu(),$(()=>{var o;(o=C(t.itemsRef))==null||o.focus({preventScroll:!0}),t.goToItem(S.Last)});break}}function u(h){switch(h.key){case x.Space:h.preventDefault();break}}function k(h){e.disabled||(t.menuState.value===0?(t.closeMenu(),$(()=>{var o;return(o=C(t.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(h.preventDefault(),t.openMenu(),ft(()=>{var o;return(o=C(t.itemsRef))==null?void 0:o.focus({preventScroll:!0})})))}let f=Ie(z(()=>({as:e.as,type:s.type})),t.buttonRef);return()=>{var h;let o={open:t.menuState.value===0},{id:v,...d}=e,c={ref:t.buttonRef,id:v,type:f.value,"aria-haspopup":"menu","aria-controls":(h=C(t.itemsRef))==null?void 0:h.id,"aria-expanded":e.disabled?void 0:t.menuState.value===0,onKeydown:i,onKeyup:u,onClick:k};return F({ourProps:c,theirProps:d,slot:o,attrs:s,slots:l,name:"MenuButton"})}}}),wt=p({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${K()}`}},setup(e,{attrs:s,slots:l,expose:r}){let t=D("MenuItems"),i=L(null);r({el:t.itemsRef,$el:t.itemsRef}),dt({container:z(()=>C(t.itemsRef)),enabled:z(()=>t.menuState.value===0),accept(o){return o.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});function u(o){var v;switch(i.value&&clearTimeout(i.value),o.key){case x.Space:if(t.searchQuery.value!=="")return o.preventDefault(),o.stopPropagation(),t.search(o.key);case x.Enter:if(o.preventDefault(),o.stopPropagation(),t.activeItemIndex.value!==null){let d=t.items.value[t.activeItemIndex.value];(v=C(d.dataRef.domRef))==null||v.click()}t.closeMenu(),re(C(t.buttonRef));break;case x.ArrowDown:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Next);case x.ArrowUp:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Previous);case x.Home:case x.PageUp:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.First);case x.End:case x.PageDown:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Last);case x.Escape:o.preventDefault(),o.stopPropagation(),t.closeMenu(),$(()=>{var d;return(d=C(t.buttonRef))==null?void 0:d.focus({preventScroll:!0})});break;case x.Tab:o.preventDefault(),o.stopPropagation(),t.closeMenu(),$(()=>Pe(C(t.buttonRef),o.shiftKey?ee.Previous:ee.Next));break;default:o.key.length===1&&(t.search(o.key),i.value=setTimeout(()=>t.clearSearch(),350));break}}function k(o){switch(o.key){case x.Space:o.preventDefault();break}}let f=Re(),h=z(()=>f!==null?(f.value&E.Open)===E.Open:t.menuState.value===0);return()=>{var o,v;let d={open:t.menuState.value===0},{id:c,...a}=e,w={"aria-activedescendant":t.activeItemIndex.value===null||(o=t.items.value[t.activeItemIndex.value])==null?void 0:o.id,"aria-labelledby":(v=C(t.buttonRef))==null?void 0:v.id,id:c,onKeydown:u,onKeyup:k,role:"menu",tabIndex:0,ref:t.itemsRef};return F({ourProps:w,theirProps:a,slot:d,attrs:s,slots:l,features:Y.RenderStrategy|Y.Static,visible:h.value,name:"MenuItems"})}}}),_t=p({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${K()}`}},setup(e,{slots:s,attrs:l,expose:r}){let t=D("MenuItem"),i=L(null);r({el:i,$el:i});let u=z(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===e.id:!1),k=z(()=>({disabled:e.disabled,textValue:"",domRef:i}));q(()=>{var a,w;let b=(w=(a=C(i))==null?void 0:a.textContent)==null?void 0:w.toLowerCase().trim();b!==void 0&&(k.value.textValue=b)}),q(()=>t.registerItem(e.id,k)),se(()=>t.unregisterItem(e.id)),le(()=>{t.menuState.value===0&&u.value&&t.activationTrigger.value!==0&&$(()=>{var a,w;return(w=(a=C(i))==null?void 0:a.scrollIntoView)==null?void 0:w.call(a,{block:"nearest"})})});function f(a){if(e.disabled)return a.preventDefault();t.closeMenu(),re(C(t.buttonRef))}function h(){if(e.disabled)return t.goToItem(S.Nothing);t.goToItem(S.Specific,e.id)}let o=We();function v(a){o.update(a)}function d(a){o.wasMoved(a)&&(e.disabled||u.value||t.goToItem(S.Specific,e.id,0))}function c(a){o.wasMoved(a)&&(e.disabled||u.value&&t.goToItem(S.Nothing))}return()=>{let{disabled:a}=e,w={active:u.value,disabled:a,close:t.closeMenu},{id:b,...M}=e;return F({ourProps:{id:b,ref:i,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:h,onPointerenter:v,onMouseenter:v,onPointermove:d,onMousemove:d,onPointerleave:c,onMouseleave:c},theirProps:{...l,...M},slot:w,attrs:l,slots:s,name:"MenuItem"})}}});const U={async analysis(e){const s=J(),l=J();return R.post("api/v1/download/analysis",{rss_link:e}).then(({data:r})=>{r.status?l.trigger(r):s.trigger(r)}),{onResult:s.on,onError:l.on}},async collection(e){const{data:s}=await R.post("api/v1/download/collection",e);return s.status==="Success"},async subscribe(e){const{data:s}=await R.post("api/v1/download/subscribe",e);return s.status==="Success"}},gt={key:0,"space-y-12px":""},bt={flex:"~ justify-end"},xt={key:1},Lt={flex:"~ justify-end","space-x-10px":""},Ct=p({__name:"ab-add-bangumi",props:{show:{default:!1}},emits:["update:show"],setup(e){const{getAll:s}=Ae(),l=ae(e,"show"),r=L(""),t=ve(),i=L({added:!1,deleted:!1,dpi:"",eps_collect:!1,filter:[],group_name:"",id:0,official_title:"",offset:0,poster_link:"",rss_link:[],rule_name:"",save_path:"",season:1,season_raw:"",source:null,subtitle:"",title_raw:"",year:null}),u=Q({loading:!1,next:!1}),k=Q({collect:!1,subscribe:!1});me(l,v=>{v||(r.value="",setTimeout(()=>{u.next=!1},300))});async function f(){if(r.value==="")t.error("Please enter the RSS link!");else try{u.loading=!0;const{onError:v,onResult:d}=await U.analysis(r.value);d(c=>{i.value=c,u.loading=!1,u.next=!0,console.log("rule",c)}),v(c=>{t.error(c.status),u.loading=!1,console.log("error",c)})}catch{t.error("Failed to analyser!")}}async function h(){if(i.value)try{k.collect=!0;const v=await U.collection(i.value);k.collect=!1,v?(t.success("Collect Success!"),s(),l.value=!1):t.error("Collect Failed!")}catch{t.error("Collect Error!")}}async function o(){if(i.value)try{k.subscribe=!0;const v=await U.subscribe(i.value);k.subscribe=!1,v?(t.success("Subscribe Success!"),s(),l.value=!1):t.error("Subscribe Failed!")}catch{t.error("Subscribe Error!")}}return(v,d)=>{const c=Be,a=ce,w=Ve,b=ue;return g(),W(b,{show:l.value,"onUpdate:show":d[2]||(d[2]=M=>l.value=M),title:"Add Bangumi",css:"w-360px"},{default:y(()=>[_(u).next?(g(),I("div",xt,[n(w,{rule:_(i),"onUpdate:rule":d[1]||(d[1]=M=>H(i)?i.value=M:null)},null,8,["rule"]),m("div",Lt,[n(a,{size:"small",loading:_(k).collect,onClick:h},{default:y(()=>[T("Collect")]),_:1},8,["loading"]),n(a,{size:"small",loading:_(k).subscribe,onClick:o},{default:y(()=>[T("Subscribe")]),_:1},8,["loading"])])])):(g(),I("div",gt,[n(c,{data:_(r),"onUpdate:data":d[0]||(d[0]=M=>H(r)?r.value=M:null),label:"RSS Link",type:"input",prop:{placeholder:"Please enter the RSS link"},"bottom-line":!0},null,8,["data"]),m("div",bt,[n(a,{size:"small",loading:_(u).loading,onClick:f},{default:y(()=>[T("Analyse")]),_:1},8,["loading"])])]))]),_:1},8,["show"])}}}),jt={"space-y-16px":""},yt=m("div",{line:""},null,-1),Mt={flex:"~ justify-end"},pt=p({__name:"ab-change-account",props:{show:{default:!1}},emits:["update:show"],setup(e){const s=ae(e,"show"),{user:l,update:r}=O();return(t,i)=>{const u=He,k=ce,f=ue;return g(),W(f,{show:s.value,"onUpdate:show":i[2]||(i[2]=h=>s.value=h),title:"Change Account",css:"w-365px"},{default:y(()=>[m("div",jt,[n(u,{label:"Username"},{default:y(()=>[G(m("input",{"onUpdate:modelValue":i[0]||(i[0]=h=>_(l).username=h),type:"text",placeholder:"username","ab-input":""},null,512),[[X,_(l).username]])]),_:1}),n(u,{label:"Password"},{default:y(()=>[G(m("input",{"onUpdate:modelValue":i[1]||(i[1]=h=>_(l).password=h),type:"password",placeholder:"password","ab-input":""},null,512),[[X,_(l).password]])]),_:1}),yt,m("div",Mt,[n(k,{size:"small",onClick:_(r)},{default:y(()=>[T("Update")]),_:1},8,["onClick"])])])]),_:1},8,["show"])}}}),St={"wh-24px":"","f-cer":""},It={rounded:"1/2","f-cer":"",border:"2px solid white","wh-22px":""},Rt=p({__name:"ab-status",props:{running:{type:Boolean,default:!1}},setup(e){return(s,l)=>(g(),I("div",St,[m("div",It,[m("div",{class:P([s.running?"bg-running":"bg-stopped"]),rounded:"1/2","wh-10px":"","transition-colors":""},null,2)])]))}}),Wt={rel:""},zt={"fx-cer":"","space-x-16px":""},Pt=["onClick"],$t={"text-main":""},Bt=p({__name:"ab-status-bar",props:{running:{type:Boolean,default:!1},items:{}},emits:["clickAdd"],setup(e){return(s,l)=>{const r=Rt;return g(),W(_(vt),null,{default:y(()=>[m("div",Wt,[m("div",zt,[n(_(Ue),{theme:"outline",size:"24",fill:"#fff","is-btn":"","btn-click":"",onClick:l[0]||(l[0]=()=>s.$emit("clickAdd"))}),n(_(mt),{"bg-transparent":"","is-btn":"","btn-click":""},{default:y(()=>[n(_(Ge),{theme:"outline",size:"24",fill:"#fff"})]),_:1}),n(r,{running:s.running},null,8,["running"])]),n(_(wt),{abs:"","top-50px":"","w-120px":"","rounded-8px":"","bg-white":"","overflow-hidden":"",shadow:"","z-99":""},{default:y(()=>[(g(!0),I(oe,null,ie(s.items,t=>(g(),W(_(_t),{key:t.id},{default:y(({active:i})=>[m("div",{"w-full":"","h-32px":"","px-12px":"","fx-cer":"","justify-between":"","is-btn":"","hover:text-white":"","hover:bg-primary":"",class:P(["group",[i?"text-white bg-theme-row":"text-black"]]),onClick:t.handle},[m("div",$t,N(t.label),1),m("div",{class:P(["group-hover:text-white",[i?"text-white":"text-primary"]])},[(g(),W(Z(t.icon),{size:"16"}))],2)],10,Pt)]),_:2},1024))),128))]),_:1})])]),_:1})}}}),At={bg:"#7752B4","text-white":"","fx-cer":"","rounded-12px":"","h-36px":"","px-12px":"","space-x-12px":"","w-276px":"","focus-within:w-396px":"","transition-width":""},Vt=["value","placeholder","onKeyup"],Ht=p({__name:"ab-search",props:{value:{default:""},placeholder:{default:""}},emits:["update:value","click-search"],setup(e,{emit:s}){const l=e;function r(i){const u=i.target;s("update:value",u.value)}function t(){s("click-search",l.value)}return(i,u)=>(g(),I("div",At,[n(_(ot),{theme:"outline",size:"24",fill:"#fff","is-btn":"","btn-click":"",onClick:t}),m("input",{type:"text",value:i.value,placeholder:i.placeholder,"input-reset":"",onInput:r,onKeyup:we(t,["enter"])},null,40,Vt)]))}}),V={async restart(){const{data:e}=await R.get("api/v1/restart");return e.status==="ok"},async start(){const{data:e}=await R.get("api/v1/start");return e.status==="ok"},async stop(){const{data:e}=await R.get("api/v1/stop");return e.status==="ok"},async status(){const{data:e}=await R.get("api/v1/status");return e.status==="running"},async shutdown(){const{data:e}=await R.get("api/v1/shutdown");return e.status==="ok"}},te=_e("program",()=>{const{auth:e}=O(),s=L(!1);function l(){const{execute:o,onResult:v}=A(V.status);v(d=>{s.value=d}),e.value!==""&&o()}const{pause:r,resume:t}=ge(l,3e3,{immediate:!1,immediateCallback:!0});function i(o){return{failRule:v=>!v,message:{success:`${o} Success!`,fail:`${o} Failed!`}}}const{execute:u}=A(V.start,i("Start")),{execute:k}=A(V.stop,i("Pause")),{execute:f}=A(V.shutdown,i("Shutdown")),{execute:h}=A(V.restart,i("Restart"));return{running:s,getStatus:l,onUpdate:t,offUpdate:r,start:u,pause:k,shutdown:f,restart:h}}),Tt=""+new URL("../favicon-light.svg",import.meta.url).href,Et=""+new URL("../AutoBangumi.svg",import.meta.url).href,Ft={"h-60px":"","bg-theme-row":"","text-white":"","rounded-12px":"","fx-cer":"","px-24px":""},Dt=m("div",{"fx-cer":"","space-x-16px":""},[m("img",{src:Tt,alt:"favicon","wh-24px":""}),m("img",{src:Et,alt:"AutoBangumi","h-24px":"",rel:"","top-2px":""})],-1),Ut={"ml-auto":""},Nt=p({__name:"ab-topbar",setup(e){const s=L(""),l=L(!1),r=L(!1),{onUpdate:t,offUpdate:i,start:u,pause:k,shutdown:f,restart:h}=te(),{running:o}=be(te()),v=[{id:1,label:"Start",icon:et,handle:u},{id:2,label:"Pause",icon:Xe,handle:k},{id:3,label:"Restart",icon:nt,handle:h},{id:4,label:"Shutdown",icon:tt,handle:f},{id:5,label:"Profile",icon:Je,handle:()=>{l.value=!0}}];return xe(()=>{t()}),se(()=>{i()}),(d,c)=>{const a=Ht,w=Bt,b=pt,M=Ct;return g(),I("div",Ft,[Dt,n(a,{value:_(s),"onUpdate:value":c[0]||(c[0]=B=>H(s)?s.value=B:null),hidden:""},null,8,["value"]),m("div",Ut,[n(w,{items:v,running:_(o),onClickAdd:c[1]||(c[1]=()=>r.value=!0)},null,8,["running"])]),n(b,{show:_(l),"onUpdate:show":c[2]||(c[2]=B=>H(l)?l.value=B:null)},null,8,["show"]),n(M,{show:_(r),"onUpdate:show":c[3]||(c[3]=B=>H(r)?r.value=B:null)},null,8,["show"])])}}}),Ot={"layout-container":""},Zt={"layout-main":""},Kt={"layout-content":""},qt={"overflow-auto":"","mt-12px":"","flex-grow":""},en=p({__name:"index",setup(e){return(s,l)=>{const r=Nt,t=ct,i=De,u=ne("RouterView");return g(),I("div",Ot,[n(r),m("main",Zt,[n(t),m("div",Kt,[n(i,{title:s.$route.name},null,8,["title"]),m("div",qt,[n(u,null,{default:y(({Component:k})=>[(g(),W(Le,null,[(g(),W(Z(k)))],1024))]),_:1})])])])])}}});export{en as default};
