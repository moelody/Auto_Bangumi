import{x as e,U as x,e as v,r as h,Y as R,V as s}from"./index-eb234cef.js";import{r as S}from"./bangumi-dfd5c2d3.js";const u={async restart(){const{data:t}=await e.get("api/v1/restart");return t.status==="ok"},async start(){const{data:t}=await e.get("api/v1/start");return t.status==="ok"},async stop(){const{data:t}=await e.get("api/v1/stop");return t.status==="ok"},async status(){const{data:t}=await e.get("api/v1/status");return t.status==="running"},async shutdown(){const{data:t}=await e.get("api/v1/shutdown");return t.status==="ok"}},A=x("program",()=>{const{auth:t}=v(),o=h(!1);function c(){const{execute:r,onResult:n}=s(u.status);n(w=>{o.value=w}),t.value!==""&&r()}const{pause:i,resume:p}=R(c,3e3,{immediate:!1,immediateCallback:!0});function a(r){return{failRule:n=>!n,message:{success:`${r} Success!`,fail:`${r} Failed!`}}}const{execute:d}=s(u.start,a("Start")),{execute:l}=s(u.stop,a("Pause")),{execute:m}=s(u.shutdown,a("Shutdown")),{execute:f}=s(u.restart,a("Restart")),{execute:g}=s(S.resetAll,a("Reset Rule"));return{running:o,getStatus:c,onUpdate:p,offUpdate:i,start:d,pause:l,shutdown:m,restart:f,resetRule:g}});export{A as u};
