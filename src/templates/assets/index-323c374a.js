import{d as I,o as g,c as p,a as k,t as D,b as n,r as j,u as de,e as Y,f as ee,n as z,g as w,F as te,h as ne,w as M,i as W,j as U,k as oe,l as R,p as he,m as O,q as ie,s as P,v as ke,x as E,y as Z,z as le,A as fe,B as K,C as ve,D as B,E as $,G as q,H as J,I as me,J as we,K as _e,L as ge}from"./index-eb234cef.js";import{I as x,m as be,y as xe,w as Le,h as Ce,o as C,c as je,u as Me,l as A,H,t as N,b as ye,p as Ie,N as Q,a as Se,x as pe,d as S,e as L,v as We,f as G,_ as se,O as Re,g as ze}from"./bangumi-dfd5c2d3.js";import{u as Pe,_ as Ve,a as ae}from"./bangumi-30b5c145.js";import{_ as re,a as Be}from"./ab-button-702b3414.js";import{u as X}from"./program-ecec7127.js";import"./ab-container.vue_vue_type_script_setup_true_lang-2c9f80e8.js";const $e={"fx-cer":"","space-x-12px":""},Ae={"text-h1":""},He=k("div",{"w-160px":"","h-3px":"","bg-theme-row":"","rounded-full":""},null,-1),Te=I({__name:"ab-page-title",props:{title:{default:"title"}},setup(e){return(a,s)=>(g(),p("div",$e,[k("div",Ae,D(a.title),1),He]))}}),Ee=x("add-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 16V32",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 24L32 24",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Fe=x("calendar",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M5 19H43V40C43 41.1046 42.1046 42 41 42H7C5.89543 42 5 41.1046 5 40V19Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M5 9C5 7.89543 5.89543 7 7 7H41C42.1046 7 43 7.89543 43 9V19H5V9Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 4V12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M32 4V12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M28 34H34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M14 34H20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M28 26H34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M14 26H20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),De=x("download",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M6 24.0083V42H42V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33 23L24 32L15 23",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M23.9917 6V32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ue=x("format",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("rect",{x:"8",y:"24",width:"32",height:"18",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M4 13H18V6H30V13H44V24H4V13Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 32L16 42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Ne=x("home",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 29V42H29V29H19Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M9 42H39",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Oe=x("log",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("rect",{x:"13",y:"10",width:"28",height:"34",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M35 10V4H8C7.44772 4 7 4.44772 7 5V38H13",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M21 22H33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M21 30H33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ze=x("logout",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33 33L42 24L33 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M16 23.9917H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ke=x("me",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 23C26.7614 23 29 20.7614 29 18C29 15.2386 26.7614 13 24 13C21.2386 13 19 15.2386 19 18C19 20.7614 21.2386 23 24 23Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M10.022 38.332C10.3657 33.1206 14.7016 29 20 29H28C33.2914 29 37.6229 33.1097 37.9767 38.3113",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),qe=x("menu-unfold",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M8 11H40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M8 24H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M8 37H40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M36.3433 29.6568L42.0001 23.9999L36.3433 18.343",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Je=x("more",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("circle",{cx:"12",cy:"24",r:"3",fill:e.colors[0]},null),n("circle",{cx:"24",cy:"24",r:"3",fill:e.colors[0]},null),n("circle",{cx:"36",cy:"24",r:"3",fill:e.colors[0]},null)])}),Qe=x("pause",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M16 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M32 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ge=x("play",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Xe=x("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Ye=x("power",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M14.5 8C13.8406 8.37652 13.2062 8.79103 12.6 9.24051C11.5625 10.0097 10.6074 10.8814 9.75 11.8402C6.79377 15.1463 5 19.4891 5 24.2455C5 34.6033 13.5066 43 24 43C34.4934 43 43 34.6033 43 24.2455C43 19.4891 41.2062 15.1463 38.25 11.8402C37.3926 10.8814 36.4375 10.0097 35.4 9.24051C34.7938 8.79103 34.1594 8.37652 33.5 8",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 4V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),et=x("refresh",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M42 8V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M6 24L6 40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M42 24C42 14.0589 33.9411 6 24 6C18.9145 6 14.3216 8.10896 11.0481 11.5M6 24C6 33.9411 14.0589 42 24 42C28.8556 42 33.2622 40.0774 36.5 36.9519",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),tt=x("search",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M21 38C30.3888 38 38 30.3888 38 21C38 11.6112 30.3888 4 21 4C11.6112 4 4 11.6112 4 21C4 30.3888 11.6112 38 21 38Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M26.657 14.3431C25.2093 12.8954 23.2093 12 21.0001 12C18.791 12 16.791 12.8954 15.3433 14.3431",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M33.2216 33.2217L41.7069 41.707",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),nt=x("setting-two",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M18.2838 43.1713C14.9327 42.1736 11.9498 40.3213 9.58787 37.867C10.469 36.8227 11 35.4734 11 34.0001C11 30.6864 8.31371 28.0001 5 28.0001C4.79955 28.0001 4.60139 28.01 4.40599 28.0292C4.13979 26.7277 4 25.3803 4 24.0001C4 21.9095 4.32077 19.8938 4.91579 17.9995C4.94381 17.9999 4.97188 18.0001 5 18.0001C8.31371 18.0001 11 15.3138 11 12.0001C11 11.0488 10.7786 10.1493 10.3846 9.35011C12.6975 7.1995 15.5205 5.59002 18.6521 4.72314C19.6444 6.66819 21.6667 8.00013 24 8.00013C26.3333 8.00013 28.3556 6.66819 29.3479 4.72314C32.4795 5.59002 35.3025 7.1995 37.6154 9.35011C37.2214 10.1493 37 11.0488 37 12.0001C37 15.3138 39.6863 18.0001 43 18.0001C43.0281 18.0001 43.0562 17.9999 43.0842 17.9995C43.6792 19.8938 44 21.9095 44 24.0001C44 25.3803 43.8602 26.7277 43.594 28.0292C43.3986 28.01 43.2005 28.0001 43 28.0001C39.6863 28.0001 37 30.6864 37 34.0001C37 35.4734 37.531 36.8227 38.4121 37.867C36.0502 40.3213 33.0673 42.1736 29.7162 43.1713C28.9428 40.752 26.676 39.0001 24 39.0001C21.324 39.0001 19.0572 40.752 18.2838 43.1713Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M24 31C27.866 31 31 27.866 31 24C31 20.134 27.866 17 24 17C20.134 17 17 20.134 17 24C17 27.866 20.134 31 24 31Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),ot={"overflow-hidden":"","wh-full":"",flex:"~ col"},it=k("div",{"text-h1":""},"Menu",-1),lt=[it],st={"text-h2":""},at=k("div",{"text-h2":""},"Logout",-1),rt=I({__name:"ab-sidebar",props:{open:{type:Boolean,default:!1}},setup(e){const s=j(e.open),r=()=>s.value=!s.value,t=de(),{logout:l}=Y(),u=[{id:1,icon:Ne,label:"HomePage",path:"/bangumi"},{id:2,icon:Fe,label:"Calendar",path:"/calendar",hidden:!0},{id:3,icon:Ge,label:"Player",path:"/player"},{id:4,icon:De,label:"Downloader",path:"/downloader",hidden:!0},{id:5,icon:Oe,label:"Log",path:"/log"},{id:6,icon:nt,label:"Config",path:"/config"}];return(f,v)=>{const d=ee("RouterLink");return g(),p("div",{class:z([w(s)?"w-240px":"w-72px"]),"bg-theme-col":"","text-white":"","transition-width":"","pb-12px":"","rounded-12px":""},[k("div",ot,[k("div",{"w-full":"","h-60px":"","is-btn":"","f-cer":"","rounded-t-10px":"",bg:"#E7E7E7",text:"#2A1C52",rel:"",onClick:r},[k("div",{class:z([!w(s)&&"abs opacity-0"]),"transition-opacity":""},lt,2),n(w(qe),{theme:"outline",size:"24",fill:"#2A1C52",abs:"",left:"24px",class:z([w(s)&&"rotate-y-180"])},null,8,["class"])]),(g(),p(te,null,ne(u,o=>n(d,{key:o.id,to:o.path,replace:"",title:o.label,"fx-cer":"","px-24px":"","space-x-42px":"","h-48px":"","is-btn":"","transition-colors":"","hover:bg":"#F1F5FA","hover:text":"#2A1C52",class:z([w(t).path===o.path&&"bg-[#F1F5FA] text-[#2A1C52]",o.hidden&&"hidden"])},{default:M(()=>[(g(),W(U(o.icon),{size:24})),k("div",st,D(o.label),1)]),_:2},1032,["to","title","class"])),64)),k("div",{title:"logout","mt-auto":"","fx-cer":"","px-24px":"","space-x-42px":"","h-48px":"","is-btn":"","transition-colors":"","hover:bg":"#F1F5FA","hover:text":"#2A1C52",onClick:v[0]||(v[0]=(...o)=>w(l)&&w(l)(...o))},[n(w(Ze),{size:24}),at])])],2)}}});function ut({container:e,accept:a,walk:s,enabled:r}){oe(()=>{let t=e.value;if(!t||r!==void 0&&!r.value)return;let l=be(e);if(!l)return;let u=Object.assign(v=>a(v),{acceptNode:a}),f=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,u,!1);for(;f.nextNode();)s(f.currentNode)})}var ct=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ct||{}),dt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(dt||{});function ht(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ue=Symbol("MenuContext");function T(e){let a=ke(ue,null);if(a===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,T),s}return a}let kt=I({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:a,attrs:s}){let r=j(1),t=j(null),l=j(null),u=j([]),f=j(""),v=j(null),d=j(1);function o(c=h=>h){let h=v.value!==null?u.value[v.value]:null,i=Re(c(u.value.slice()),b=>C(b.dataRef.domRef)),m=h?i.indexOf(h):null;return m===-1&&(m=null),{items:i,activeItemIndex:m}}let _={menuState:r,buttonRef:t,itemsRef:l,items:u,searchQuery:f,activeItemIndex:v,activationTrigger:d,closeMenu:()=>{r.value=1,v.value=null},openMenu:()=>r.value=0,goToItem(c,h,i){let m=o(),b=pe(c===S.Specific?{focus:S.Specific,id:h}:{focus:c},{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.disabled});f.value="",v.value=b,d.value=i??1,u.value=m.items},search(c){let h=f.value!==""?0:1;f.value+=c.toLowerCase();let i=(v.value!==null?u.value.slice(v.value+h).concat(u.value.slice(0,v.value+h)):u.value).find(b=>b.dataRef.textValue.startsWith(f.value)&&!b.dataRef.disabled),m=i?u.value.indexOf(i):-1;m===-1||m===v.value||(v.value=m,d.value=1)},clearSearch(){f.value=""},registerItem(c,h){let i=o(m=>[...m,{id:c,dataRef:h}]);u.value=i.items,v.value=i.activeItemIndex,d.value=1},unregisterItem(c){let h=o(i=>{let m=i.findIndex(b=>b.id===c);return m!==-1&&i.splice(m,1),i});u.value=h.items,v.value=h.activeItemIndex,d.value=1}};return xe([t,l],(c,h)=>{var i;_.closeMenu(),Le(h,Ce.Loose)||(c.preventDefault(),(i=C(t))==null||i.focus())},R(()=>r.value===0)),he(ue,_),je(R(()=>Me(r.value,{[0]:A.Open,[1]:A.Closed}))),()=>{let c={open:r.value===0,close:_.closeMenu};return H({ourProps:{},theirProps:e,slot:c,slots:a,attrs:s,name:"Menu"})}}}),ft=I({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${N()}`}},setup(e,{attrs:a,slots:s,expose:r}){let t=T("MenuButton");r({el:t.buttonRef,$el:t.buttonRef});function l(d){switch(d.key){case L.Space:case L.Enter:case L.ArrowDown:d.preventDefault(),d.stopPropagation(),t.openMenu(),P(()=>{var o;(o=C(t.itemsRef))==null||o.focus({preventScroll:!0}),t.goToItem(S.First)});break;case L.ArrowUp:d.preventDefault(),d.stopPropagation(),t.openMenu(),P(()=>{var o;(o=C(t.itemsRef))==null||o.focus({preventScroll:!0}),t.goToItem(S.Last)});break}}function u(d){switch(d.key){case L.Space:d.preventDefault();break}}function f(d){e.disabled||(t.menuState.value===0?(t.closeMenu(),P(()=>{var o;return(o=C(t.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(d.preventDefault(),t.openMenu(),ht(()=>{var o;return(o=C(t.itemsRef))==null?void 0:o.focus({preventScroll:!0})})))}let v=ye(R(()=>({as:e.as,type:a.type})),t.buttonRef);return()=>{var d;let o={open:t.menuState.value===0},{id:_,...c}=e,h={ref:t.buttonRef,id:_,type:v.value,"aria-haspopup":"menu","aria-controls":(d=C(t.itemsRef))==null?void 0:d.id,"aria-expanded":e.disabled?void 0:t.menuState.value===0,onKeydown:l,onKeyup:u,onClick:f};return H({ourProps:h,theirProps:c,slot:o,attrs:a,slots:s,name:"MenuButton"})}}}),vt=I({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${N()}`}},setup(e,{attrs:a,slots:s,expose:r}){let t=T("MenuItems"),l=j(null);r({el:t.itemsRef,$el:t.itemsRef}),ut({container:R(()=>C(t.itemsRef)),enabled:R(()=>t.menuState.value===0),accept(o){return o.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});function u(o){var _;switch(l.value&&clearTimeout(l.value),o.key){case L.Space:if(t.searchQuery.value!=="")return o.preventDefault(),o.stopPropagation(),t.search(o.key);case L.Enter:if(o.preventDefault(),o.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(_=C(c.dataRef.domRef))==null||_.click()}t.closeMenu(),se(C(t.buttonRef));break;case L.ArrowDown:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Next);case L.ArrowUp:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Previous);case L.Home:case L.PageUp:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.First);case L.End:case L.PageDown:return o.preventDefault(),o.stopPropagation(),t.goToItem(S.Last);case L.Escape:o.preventDefault(),o.stopPropagation(),t.closeMenu(),P(()=>{var c;return(c=C(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case L.Tab:o.preventDefault(),o.stopPropagation(),t.closeMenu(),P(()=>We(C(t.buttonRef),o.shiftKey?G.Previous:G.Next));break;default:o.key.length===1&&(t.search(o.key),l.value=setTimeout(()=>t.clearSearch(),350));break}}function f(o){switch(o.key){case L.Space:o.preventDefault();break}}let v=Ie(),d=R(()=>v!==null?(v.value&A.Open)===A.Open:t.menuState.value===0);return()=>{var o,_;let c={open:t.menuState.value===0},{id:h,...i}=e,m={"aria-activedescendant":t.activeItemIndex.value===null||(o=t.items.value[t.activeItemIndex.value])==null?void 0:o.id,"aria-labelledby":(_=C(t.buttonRef))==null?void 0:_.id,id:h,onKeydown:u,onKeyup:f,role:"menu",tabIndex:0,ref:t.itemsRef};return H({ourProps:m,theirProps:i,slot:c,attrs:a,slots:s,features:Q.RenderStrategy|Q.Static,visible:d.value,name:"MenuItems"})}}}),mt=I({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${N()}`}},setup(e,{slots:a,attrs:s,expose:r}){let t=T("MenuItem"),l=j(null);r({el:l,$el:l});let u=R(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===e.id:!1),f=R(()=>({disabled:e.disabled,textValue:"",domRef:l}));O(()=>{var i,m;let b=(m=(i=C(l))==null?void 0:i.textContent)==null?void 0:m.toLowerCase().trim();b!==void 0&&(f.value.textValue=b)}),O(()=>t.registerItem(e.id,f)),ie(()=>t.unregisterItem(e.id)),oe(()=>{t.menuState.value===0&&u.value&&t.activationTrigger.value!==0&&P(()=>{var i,m;return(m=(i=C(l))==null?void 0:i.scrollIntoView)==null?void 0:m.call(i,{block:"nearest"})})});function v(i){if(e.disabled)return i.preventDefault();t.closeMenu(),se(C(t.buttonRef))}function d(){if(e.disabled)return t.goToItem(S.Nothing);t.goToItem(S.Specific,e.id)}let o=Se();function _(i){o.update(i)}function c(i){o.wasMoved(i)&&(e.disabled||u.value||t.goToItem(S.Specific,e.id,0))}function h(i){o.wasMoved(i)&&(e.disabled||u.value&&t.goToItem(S.Nothing))}return()=>{let{disabled:i}=e,m={active:u.value,disabled:i,close:t.closeMenu},{id:b,...y}=e;return H({ourProps:{id:b,ref:l,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:d,onPointerenter:_,onMouseenter:_,onPointermove:c,onMousemove:c,onPointerleave:h,onMouseleave:h},theirProps:{...s,...y},slot:m,attrs:s,slots:a,name:"MenuItem"})}}});const F={async analysis(e){const a=Z(),s=Z();return E.post("api/v1/download/analysis",{rss_link:e}).then(({data:r})=>{r.status?s.trigger(r):a.trigger(r)}),{onResult:a.on,onError:s.on}},async collection(e){const{data:a}=await E.post("api/v1/download/collection",e);return a.status==="Success"},async subscribe(e){const{data:a}=await E.post("api/v1/download/subscribe",e);return a.status==="Success"}},wt={key:0,"space-y-12px":""},_t={flex:"~ justify-end"},gt={key:1},bt={flex:"~ justify-end","space-x-10px":""},xt=I({__name:"ab-add-bangumi",props:{show:{default:!1}},emits:["update:show"],setup(e){const{getAll:a}=Pe(),s=le(e,"show"),r=j(""),t=fe(),l=j({added:!1,deleted:!1,dpi:"",eps_collect:!1,filter:[],group_name:"",id:0,official_title:"",offset:0,poster_link:"",rss_link:[],rule_name:"",save_path:"",season:1,season_raw:"",source:null,subtitle:"",title_raw:"",year:null}),u=K({loading:!1,next:!1}),f=K({collect:!1,subscribe:!1});ve(s,_=>{_||(r.value="",setTimeout(()=>{u.next=!1},300))});async function v(){if(r.value==="")t.error("Please enter the RSS link!");else try{u.loading=!0;const{onError:_,onResult:c}=await F.analysis(r.value);c(h=>{l.value=h,u.loading=!1,u.next=!0,console.log("rule",h)}),_(h=>{t.error(h.status),u.loading=!1,console.log("error",h)})}catch{t.error("Failed to analyser!")}}async function d(){if(l.value)try{f.collect=!0;const _=await F.collection(l.value);f.collect=!1,_?(t.success("Collect Success!"),a(),s.value=!1):t.error("Collect Failed!")}catch{t.error("Collect Error!")}}async function o(){if(l.value)try{f.subscribe=!0;const _=await F.subscribe(l.value);f.subscribe=!1,_?(t.success("Subscribe Success!"),a(),s.value=!1):t.error("Subscribe Failed!")}catch{t.error("Subscribe Error!")}}return(_,c)=>{const h=ze,i=re,m=Ve,b=ae;return g(),W(b,{show:s.value,"onUpdate:show":c[2]||(c[2]=y=>s.value=y),title:"Add Bangumi",css:"w-360px"},{default:M(()=>[w(u).next?(g(),p("div",gt,[n(m,{rule:w(l),"onUpdate:rule":c[1]||(c[1]=y=>B(l)?l.value=y:null)},null,8,["rule"]),k("div",bt,[n(i,{size:"small",loading:w(f).collect,onClick:d},{default:M(()=>[$("Collect")]),_:1},8,["loading"]),n(i,{size:"small",loading:w(f).subscribe,onClick:o},{default:M(()=>[$("Subscribe")]),_:1},8,["loading"])])])):(g(),p("div",wt,[n(h,{data:w(r),"onUpdate:data":c[0]||(c[0]=y=>B(r)?r.value=y:null),label:"RSS Link",type:"input",prop:{placeholder:"Please enter the RSS link"},"bottom-line":!0},null,8,["data"]),k("div",_t,[n(i,{size:"small",loading:w(u).loading,onClick:v},{default:M(()=>[$("Analyse")]),_:1},8,["loading"])])]))]),_:1},8,["show"])}}}),Lt={"space-y-16px":""},Ct=k("div",{line:""},null,-1),jt={flex:"~ justify-end"},Mt=I({__name:"ab-change-account",props:{show:{default:!1}},emits:["update:show"],setup(e){const a=le(e,"show"),{user:s,update:r}=Y();return(t,l)=>{const u=Be,f=re,v=ae;return g(),W(v,{show:a.value,"onUpdate:show":l[2]||(l[2]=d=>a.value=d),title:"Change Account",css:"w-365px"},{default:M(()=>[k("div",Lt,[n(u,{label:"Username"},{default:M(()=>[q(k("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>w(s).username=d),type:"text",placeholder:"username","ab-input":""},null,512),[[J,w(s).username]])]),_:1}),n(u,{label:"Password"},{default:M(()=>[q(k("input",{"onUpdate:modelValue":l[1]||(l[1]=d=>w(s).password=d),type:"password",placeholder:"password","ab-input":""},null,512),[[J,w(s).password]])]),_:1}),Ct,k("div",jt,[n(f,{size:"small",onClick:w(r)},{default:M(()=>[$("Update")]),_:1},8,["onClick"])])])]),_:1},8,["show"])}}}),yt={"wh-24px":"","f-cer":""},It={rounded:"1/2","f-cer":"",border:"2px solid white","wh-22px":""},St=I({__name:"ab-status",props:{running:{type:Boolean,default:!1}},setup(e){return(a,s)=>(g(),p("div",yt,[k("div",It,[k("div",{class:z([a.running?"bg-running":"bg-stopped"]),rounded:"1/2","wh-10px":"","transition-colors":""},null,2)])]))}}),pt={rel:""},Wt={"fx-cer":"","space-x-16px":""},Rt=["onClick"],zt={"text-main":""},Pt=I({__name:"ab-status-bar",props:{running:{type:Boolean,default:!1},items:{}},emits:["clickAdd"],setup(e){return(a,s)=>{const r=St;return g(),W(w(kt),null,{default:M(()=>[k("div",pt,[k("div",Wt,[n(w(Ee),{theme:"outline",size:"24",fill:"#fff","is-btn":"","btn-click":"",onClick:s[0]||(s[0]=()=>a.$emit("clickAdd"))}),n(w(ft),{"bg-transparent":"","is-btn":"","btn-click":""},{default:M(()=>[n(w(Je),{theme:"outline",size:"24",fill:"#fff"})]),_:1}),n(r,{running:a.running},null,8,["running"])]),n(w(vt),{abs:"","top-50px":"","w-120px":"","rounded-8px":"","bg-white":"","overflow-hidden":"",shadow:"","z-99":""},{default:M(()=>[(g(!0),p(te,null,ne(a.items,t=>(g(),W(w(mt),{key:t.id},{default:M(({active:l})=>[k("div",{"w-full":"","h-32px":"","px-12px":"","fx-cer":"","justify-between":"","is-btn":"","hover:text-white":"","hover:bg-primary":"",class:z(["group",[l?"text-white bg-theme-row":"text-black"]]),onClick:()=>t.handle&&t.handle()},[k("div",zt,D(t.label),1),k("div",{class:z(["group-hover:text-white",[l?"text-white":"text-primary"]])},[(g(),W(U(t.icon),{size:"16"}))],2)],10,Rt)]),_:2},1024))),128))]),_:1})])]),_:1})}}}),Vt={bg:"#7752B4","text-white":"","fx-cer":"","rounded-12px":"","h-36px":"","px-12px":"","space-x-12px":"","w-276px":"","focus-within:w-396px":"","transition-width":""},Bt=["value","placeholder","onKeyup"],$t=I({__name:"ab-search",props:{value:{default:""},placeholder:{default:""}},emits:["update:value","click-search"],setup(e,{emit:a}){const s=e;function r(l){const u=l.target;a("update:value",u.value)}function t(){a("click-search",s.value)}return(l,u)=>(g(),p("div",Vt,[n(w(tt),{theme:"outline",size:"24",fill:"#fff","is-btn":"","btn-click":"",onClick:t}),k("input",{type:"text",value:l.value,placeholder:l.placeholder,"input-reset":"",onInput:r,onKeyup:me(t,["enter"])},null,40,Bt)]))}}),At="/favicon-light.svg",Ht="/AutoBangumi.svg",Tt={"h-60px":"","bg-theme-row":"","text-white":"","rounded-12px":"","fx-cer":"","px-24px":""},Et=k("div",{"fx-cer":"","space-x-16px":""},[k("img",{src:At,alt:"favicon","wh-24px":""}),k("img",{src:Ht,alt:"AutoBangumi","h-24px":"",rel:"","top-2px":""})],-1),Ft={"ml-auto":""},Dt=I({__name:"ab-topbar",setup(e){const a=j(""),s=j(!1),r=j(!1),{onUpdate:t,offUpdate:l,start:u,pause:f,shutdown:v,restart:d,resetRule:o}=X(),{running:_}=we(X()),c=[{id:1,label:"Start",icon:Xe,handle:u},{id:2,label:"Pause",icon:Qe,handle:f},{id:3,label:"Restart",icon:et,handle:d},{id:4,label:"Shutdown",icon:Ye,handle:v},{id:5,label:"Reset Rule",icon:Ue,handle:o},{id:6,label:"Profile",icon:Ke,handle:()=>{s.value=!0}}];return _e(()=>{t()}),ie(()=>{l()}),(h,i)=>{const m=$t,b=Pt,y=Mt,ce=xt;return g(),p("div",Tt,[Et,n(m,{value:w(a),"onUpdate:value":i[0]||(i[0]=V=>B(a)?a.value=V:null),hidden:""},null,8,["value"]),k("div",Ft,[n(b,{items:c,running:w(_),onClickAdd:i[1]||(i[1]=()=>r.value=!0)},null,8,["running"])]),n(y,{show:w(s),"onUpdate:show":i[2]||(i[2]=V=>B(s)?s.value=V:null)},null,8,["show"]),n(ce,{show:w(r),"onUpdate:show":i[3]||(i[3]=V=>B(r)?r.value=V:null)},null,8,["show"])])}}}),Ut={"layout-container":""},Nt={"layout-main":""},Ot={"layout-content":""},Zt={"overflow-auto":"","mt-12px":"","flex-grow":""},Yt=I({__name:"index",setup(e){return(a,s)=>{const r=Dt,t=rt,l=Te,u=ee("RouterView");return g(),p("div",Ut,[n(r),k("main",Nt,[n(t),k("div",Ot,[n(l,{title:a.$route.name},null,8,["title"]),k("div",Zt,[n(u,null,{default:M(({Component:f})=>[(g(),W(ge,null,[(g(),W(U(f)))],1024))]),_:1})])])])])}}});export{Yt as default};
