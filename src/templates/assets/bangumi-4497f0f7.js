import{a as S,_ as T,u as V}from"./bangumi-30b5c145.js";import{_ as I}from"./ab-button-702b3414.js";import{b as t,d as j,M as Y,z as D,B as E,C as q,l as H,o as _,i as B,w as f,g as a,c as v,a as l,E as w,t as Z,J,N as O,O as P,F as G,h as K,n as Q}from"./index-eb234cef.js";import{I as F}from"./bangumi-dfd5c2d3.js";import"./ab-container.vue_vue_type_script_setup_true_lang-2c9f80e8.js";const X=F("error-picture",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M44 23.9941C44 22.8896 43.1046 21.9941 42 21.9941C40.8954 21.9941 40 22.8896 40 23.9941H44ZM24 7.99414C25.1046 7.99414 26 7.09871 26 5.99414C26 4.88957 25.1046 3.99414 24 3.99414V7.99414ZM39 39.9941H9V43.9941H39V39.9941ZM8 38.9941V8.99414H4V38.9941H8ZM40 23.9941V38.9941H44V23.9941H40ZM9 7.99414H24V3.99414H9V7.99414ZM9 39.9941C8.44772 39.9941 8 39.5464 8 38.9941H4C4 41.7556 6.23857 43.9941 9 43.9941V39.9941ZM39 43.9941C41.7614 43.9941 44 41.7556 44 38.9941H40C40 39.5464 39.5523 39.9941 39 39.9941V43.9941ZM8 8.99414C8 8.44186 8.44771 7.99414 9 7.99414V3.99414C6.23858 3.99414 4 6.23272 4 8.99414H8Z",fill:e.colors[0]},null),t("path",{d:"M6 35L16.6931 25.198C17.4389 24.5143 18.5779 24.4953 19.3461 25.1538L32 36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 31L32.7735 26.2265C33.4772 25.5228 34.5914 25.4436 35.3877 26.0408L42 31",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M33 7L41 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M41 7L33 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ee=F("write",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M5.32497 43.4996L13.81 43.4998L44.9227 12.3871L36.4374 3.90186L5.32471 35.0146L5.32497 43.4996Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27.9521 12.3872L36.4374 20.8725",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),te={key:0},se=l("div",null,"Do you want to enable this rule?",-1),oe=l("div",{line:"","my-8px":""},null,-1),le={"fx-cer":"","justify-center":"","space-x-10px":""},ne={key:1,"space-y-12px":""},ie={"fx-cer":"","justify-end":"","space-x-10px":""},ae=l("div",null,"Delete Local File?",-1),re=l("div",{line:"","my-8px":""},null,-1),ue={"fx-cer":"","justify-center":"","space-x-10px":""},de=j({__name:"ab-edit-rule",props:{show:{default:!1},rule:{required:!0}},emits:Y(["apply","enable","deleteFile"],["update:show","update:rule"]),setup(e,{emit:r}){const u=D(e,"show"),d=D(e,"rule"),k=E({show:!1,type:"disable"});q(u,h=>{h||(k.show=!1)});const x=h=>{k.show=!0,k.type=h},L=()=>u.value=!1;function c(h){r("deleteFile",k.type,{id:d.value.id,deleteFile:h})}function R(){r("apply",d.value)}function b(){r("enable",d.value.id)}const M=H(()=>d.value.deleted?"Enable Rule":"Edit Rule"),z=H(()=>d.value.deleted?"w-300px":"w-380px");return(h,s)=>{const p=I,$=T,y=S;return _(),B(y,{show:u.value,"onUpdate:show":s[8]||(s[8]=m=>u.value=m),title:a(M),css:a(z)},{default:f(()=>[d.value.deleted?(_(),v("div",te,[se,oe,l("div",le,[t(p,{size:"small",type:"warn",onClick:s[0]||(s[0]=()=>b())},{default:f(()=>[w("Yes")]),_:1}),t(p,{size:"small",onClick:s[1]||(s[1]=()=>L())},{default:f(()=>[w("No")]),_:1})])])):(_(),v("div",ne,[t($,{rule:d.value,"onUpdate:rule":s[2]||(s[2]=m=>d.value=m)},null,8,["rule"]),l("div",ie,[t(p,{size:"small",type:"warn",onClick:s[3]||(s[3]=()=>x("disable"))},{default:f(()=>[w("Disable")]),_:1}),t(p,{size:"small",type:"warn",onClick:s[4]||(s[4]=()=>x("delete"))},{default:f(()=>[w("Delete")]),_:1}),t(p,{size:"small",onClick:R},{default:f(()=>[w("Apply")]),_:1})])])),t(y,{show:a(k).show,"onUpdate:show":s[7]||(s[7]=m=>a(k).show=m),title:"Delete"},{default:f(()=>[ae,re,l("div",ue,[t(p,{size:"small",type:"warn",onClick:s[5]||(s[5]=()=>c(!0))},{default:f(()=>[w("Yes")]),_:1}),t(p,{size:"small",onClick:s[6]||(s[6]=()=>c(!1))},{default:f(()=>[w("No")]),_:1})])]),_:1},8,["show"])]),_:1},8,["show","title","css"])}}}),ce={"rounded-4px":"","overflow-hidden":"","poster-shandow":"",rel:""},pe={"w-full":"","h-210px":""},fe=["src"],_e={key:1,"wh-full":"","f-cer":"",border:"1 white"},ke={abs:"","f-cer":"","z-1":"","inset-0":"","opacity-0":"","transition-all":"","duration-300":"","hover:backdrop-blur-2px":"","hover:bg-white":"","hover:bg-opacity-30":"","hover:opacity-100":"","active:duration-0":"","active:bg-opacity-60":"",class:"group"},he={"text-white":"",rounded:"1/2","wh-44px":"","f-cer":"","bg-theme-row":"",class:"group-active:poster-pen-active"},me={"px-4px":"","py-8px":""},we={"text-h3":"",truncate:""},ve={"text-main":""},be=j({__name:"ab-bangumi-card",props:{poster:{},name:{},season:{}},emits:["click"],setup(e){return(r,u)=>(_(),v("div",{"w-150px":"","is-btn":"",onClick:u[0]||(u[0]=()=>r.$emit("click"))},[l("div",ce,[l("div",pe,[r.poster!==""?(_(),v("img",{key:0,src:`https://mikanani.me${r.poster}`,alt:"poster","wh-full":""},null,8,fe)):(_(),v("div",_e,[t(a(X),{theme:"outline",size:"24",fill:"#333"})]))]),l("div",ke,[l("div",he,[t(a(ee),{size:"20"})])])]),l("div",me,[l("div",we,Z(r.name),1),l("div",ve,"Season "+Z(r.season),1)])]))}}),xe={flex:"~ wrap","gap-y-12px":"","gap-x-50px":""},Me=j({__name:"bangumi",setup(e){const{data:r}=J(V()),{getAll:u,useUpdateRule:d,useDisableRule:k,useEnableRule:x,useDeleteRule:L}=V(),c=E({show:!1,item:{added:!1,deleted:!1,dpi:"",eps_collect:!1,filter:[],group_name:"",id:0,official_title:"",offset:0,poster_link:"",rss_link:[],rule_name:"",save_path:"",season:1,season_raw:"",source:null,subtitle:"",title_raw:"",year:null}});function R(n){c.show=!0,c.item=n}function b(){c.show=!1,u()}const{execute:M,onResult:z}=d(),{execute:h,onResult:s}=x(),{execute:p,onResult:$}=k(),{execute:y,onResult:m}=L(),g=O();z(({msg:n})=>{g.success(n),b()}),$(({msg:n})=>{g.success(n),b()}),s(({msg:n})=>{g.success(n),b()}),m(({msg:n})=>{g.success(n),b()}),P(()=>{u()});function W(n,i,C){n==="disable"&&p(i,C),n==="delete"&&y(i,C)}return(n,i)=>{const C=be,U=de;return _(),v("div",xe,[(_(!0),v(G,null,K(a(r),o=>(_(),B(C,{key:o.id,class:Q([o.deleted&&"grayscale"]),poster:o.poster_link??"",name:o.official_title,season:o.season,onClick:()=>R(o)},null,8,["class","poster","name","season","onClick"]))),128)),t(U,{show:a(c).show,"onUpdate:show":i[0]||(i[0]=o=>a(c).show=o),rule:a(c).item,"onUpdate:rule":i[1]||(i[1]=o=>a(c).item=o),onEnable:i[2]||(i[2]=o=>a(h)(o)),onDeleteFile:i[3]||(i[3]=(o,{id:N,deleteFile:A})=>W(o,N,A)),onApply:i[4]||(i[4]=o=>a(M)(o))},null,8,["show","rule"])])}}});export{Me as default};
