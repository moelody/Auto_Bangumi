import{q as G,aC as Ee,G as F,d as ie,b2 as Be,c as M,l as h,p as we,t as Me,v as ke,aE as Se,I as k,o as v,h as C,i,z as q,Q as m,J as c,n as u,f as x,aS as L,b as H,U as z,a3 as S,L as D,b1 as P,r as Te,K as R,A as j,T as Ae,y as ue,ai as de,b3 as ce,aJ as ee,E as Ie,ah as De,X as ne,a8 as se,e as oe,b4 as Fe}from"./index.97c47918.js";import{d as fe,E as Re,e as $e,f as Oe}from"./el-col.5b3c81b9.js";import{E as Ve,u as Le,a as ze,b as Pe,c as Ue}from"./el-card.60833b42.js";import{r as He}from"./debug.b4d8d755.js";import{i as Ke,E as U}from"./index.7536cd44.js";import{E as Ne,v as qe,d as je,J as Ge,K as te,x as ae,_ as Je,k as Xe}from"./index.9541ab64.js";import{o as le}from"./aria.a134eefb.js";import"./vnode.6621bd56.js";const Qe=(e,n)=>{let a;G(()=>e.value,l=>{var o,t;l?(a=document.activeElement,Ee(n)&&((t=(o=n.value).focus)==null||t.call(o))):a.focus()})},J="_trap-focus-children",E=[],re=e=>{if(E.length===0)return;const n=E[E.length-1][J];if(n.length>0&&e.code===Ne.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const a=e.shiftKey,l=e.target===n[0],o=e.target===n[n.length-1];l&&a&&(e.preventDefault(),n[n.length-1].focus()),o&&!a&&(e.preventDefault(),n[0].focus())}},We={beforeMount(e){e[J]=le(e),E.push(e),E.length<=1&&document.addEventListener("keydown",re)},updated(e){F(()=>{e[J]=le(e)})},unmounted(){E.shift(),E.length===0&&document.removeEventListener("keydown",re)}},Ze=ie({name:"ElMessageBox",directives:{TrapFocus:We},components:{ElButton:fe,ElFocusTrap:qe,ElInput:Re,ElOverlay:Ve,ElIcon:je,...Ge},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ke},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:a,zIndex:l,ns:o,size:t}=Be("message-box",M(()=>e.buttonSize)),{t:f}=a,{nextZIndex:p}=l,g=h(!1),s=we({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:p()}),K=M(()=>{const r=s.type;return{[o.bm("icon",r)]:r&&te[r]}}),N=ae(),d=ae(),me=M(()=>s.icon||te[s.type]||""),pe=M(()=>!!s.message),B=h(),X=h(),A=h(),O=h(),Q=h(),ve=M(()=>s.confirmButtonClass);G(()=>s.inputValue,async r=>{await F(),e.boxType==="prompt"&&r!==null&&Z()},{immediate:!0}),G(()=>g.value,r=>{var y,w;r&&(e.boxType!=="prompt"&&(s.autofocus?A.value=(w=(y=Q.value)==null?void 0:y.$el)!=null?w:B.value:A.value=B.value),s.zIndex=p()),e.boxType==="prompt"&&(r?F().then(()=>{var _;O.value&&O.value.$el&&(s.autofocus?A.value=(_=be())!=null?_:B.value:A.value=B.value)}):(s.editorErrorMessage="",s.validateError=!1))});const ge=M(()=>e.draggable);Le(B,X,ge),Me(async()=>{await F(),e.closeOnHashChange&&window.addEventListener("hashchange",I)}),ke(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",I)});function I(){!g.value||(g.value=!1,F(()=>{s.action&&n("action",s.action)}))}const W=()=>{e.closeOnClickModal&&V(s.distinguishCancelAndClose?"close":"cancel")},ye=Pe(W),Ce=r=>{if(s.inputType!=="textarea")return r.preventDefault(),V("confirm")},V=r=>{var y;e.boxType==="prompt"&&r==="confirm"&&!Z()||(s.action=r,s.beforeClose?(y=s.beforeClose)==null||y.call(s,r,s,I):I())},Z=()=>{if(e.boxType==="prompt"){const r=s.inputPattern;if(r&&!r.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||f("el.messagebox.error"),s.validateError=!0,!1;const y=s.inputValidator;if(typeof y=="function"){const w=y(s.inputValue);if(w===!1)return s.editorErrorMessage=s.inputErrorMessage||f("el.messagebox.error"),s.validateError=!0,!1;if(typeof w=="string")return s.editorErrorMessage=w,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},be=()=>{const r=O.value.$refs;return r.input||r.textarea},Y=()=>{V("close")},he=()=>{e.closeOnPressEscape&&Y()};return e.lockScroll&&ze(g),Qe(g),{...Se(s),ns:o,overlayEvent:ye,visible:g,hasMessage:pe,typeClass:K,contentId:N,inputId:d,btnSize:t,iconComponent:me,confirmButtonClasses:ve,rootRef:B,focusStartRef:A,headerRef:X,inputRef:O,confirmRef:Q,doClose:I,handleClose:Y,onCloseRequested:he,handleWrapperClick:W,handleInputEnter:Ce,handleAction:V,t:f}}}),Ye=["aria-label","aria-describedby"],_e=["aria-label"],xe=["id"];function en(e,n,a,l,o,t){const f=k("el-icon"),p=k("close"),g=k("el-input"),s=k("el-button"),K=k("el-focus-trap"),N=k("el-overlay");return v(),C(Ae,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=d=>e.$emit("vanish")),persisted:""},{default:i(()=>[q(m(N,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:i(()=>[c("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...d)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...d)),onMousedown:n[9]||(n[9]=(...d)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...d)),onMouseup:n[10]||(n[10]=(...d)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...d))},[m(K,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:i(()=>[c("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:x(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=L(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(v(),H("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[c("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(v(),C(f,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:i(()=>[(v(),C(z(e.iconComponent)))]),_:1},8,["class"])):S("v-if",!0),c("span",null,D(e.title),1)],2),e.showClose?(v(),H("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=d=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=P(L(d=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[m(f,{class:u(e.ns.e("close"))},{default:i(()=>[m(p)]),_:1},8,["class"])],42,_e)):S("v-if",!0)],2)):S("v-if",!0),c("div",{id:e.contentId,class:u(e.ns.e("content"))},[c("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(v(),C(f,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:i(()=>[(v(),C(z(e.iconComponent)))]),_:1},8,["class"])):S("v-if",!0),e.hasMessage?(v(),H("div",{key:1,class:u(e.ns.e("message"))},[Te(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(v(),C(z(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(v(),C(z(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:i(()=>[R(D(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):S("v-if",!0)],2),q(c("div",{class:u(e.ns.e("input"))},[m(g,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=d=>e.inputValue=d),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:P(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),c("div",{class:u(e.ns.e("errormsg")),style:x({visibility:e.editorErrorMessage?"visible":"hidden"})},D(e.editorErrorMessage),7)],2),[[j,e.showInput]])],10,xe),c("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(v(),C(s,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=d=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=P(L(d=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:i(()=>[R(D(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):S("v-if",!0),q(m(s,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=d=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=P(L(d=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:i(()=>[R(D(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[j,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Ye)]),_:3},8,["z-index","overlay-class","mask"]),[[j,e.visible]])]),_:3})}var nn=Je(Ze,[["render",en],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const $=new Map,sn=e=>{let n=document.body;return e.appendTo&&(ue(e.appendTo)&&(n=document.querySelector(e.appendTo)),se(e.appendTo)&&(n=e.appendTo),se(n)||(n=document.body)),n},on=(e,n,a=null)=>{const l=m(nn,e,ne(e.message)||de(e.message)?{default:ne(e.message)?e.message:()=>e.message}:null);return l.appContext=a,ce(l,n),sn(e).appendChild(n.firstElementChild),l.component},tn=()=>document.createElement("div"),an=(e,n)=>{const a=tn();e.onVanish=()=>{ce(null,a),$.delete(o)},e.onAction=t=>{const f=$.get(o);let p;e.showInput?p={value:o.inputValue,action:t}:p=t,e.callback?e.callback(p,l.proxy):t==="cancel"||t==="close"?e.distinguishCancelAndClose&&t!=="cancel"?f.reject("close"):f.reject("cancel"):f.resolve(p)};const l=on(e,a,n),o=l.proxy;for(const t in e)ee(e,t)&&!ee(o.$props,t)&&(o[t]=e[t]);return o.visible=!0,o};function T(e,n=null){if(!Xe)return Promise.reject();let a;return ue(e)||de(e)?e={message:e}:a=e.callback,new Promise((l,o)=>{const t=an(e,n!=null?n:T._context);$.set(t,{options:e,callback:a,resolve:l,reject:o})})}const ln=["alert","confirm","prompt"],rn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};ln.forEach(e=>{T[e]=un(e)});function un(e){return(n,a,l,o)=>{let t="";return Ie(a)?(l=a,t=""):De(a)?t="":t=a,T(Object.assign({title:t,message:n,type:"",...rn[e]},l,{boxType:e}),o)}}T.close=()=>{$.forEach((e,n)=>{n.doClose()}),$.clear()};T._context=null;const b=T;b.install=e=>{b._context=e._context,e.config.globalProperties.$msgbox=b,e.config.globalProperties.$messageBox=b,e.config.globalProperties.$alert=b.alert,e.config.globalProperties.$confirm=b.confirm,e.config.globalProperties.$prompt=b.prompt};const dn=b,cn={class:"debug"},fn=c("div",{class:"card-header"},[c("span",null,"\u91CD\u7F6EAB\u6570\u636E")],-1),mn={class:"card-con"},pn=c("div",{class:"card-header"},[c("span",null,"\u91CD\u542F\u7A0B\u5E8F")],-1),vn={class:"card-con"},Mn=ie({__name:"index",setup(e){const n=h(!1);async function a(){n.value=!0;const o=await He();n.value=!1,o.data==="Success"?U({message:"\u6570\u636E\u5DF2\u91CD\u7F6E, \u5EFA\u8BAE\u91CD\u542F\u7A0B\u5E8F\u6216\u5BB9\u5668",type:"success"}):U({message:`\u9519\u8BEF: ${o.data}`,type:"error"})}function l(){dn.confirm("\u8BE5\u64CD\u4F5C\u5C06\u91CD\u542F\u7A0B\u5E8F!",{type:"warning"}).then(async()=>{Fe().then(({data:o})=>{o.status==="success"&&U({message:"\u6B63\u5728\u91CD\u542F, \u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762...",type:"success"})}).catch(o=>{console.error("\u{1F680} ~ file: index.vue:41 ~ .then ~ error:",o),U({message:"\u64CD\u4F5C\u5931\u8D25, \u8BF7\u91CD\u8BD5!",type:"error"})})}).catch(()=>{})}return(o,t)=>{const f=fe,p=Ue,g=$e,s=Oe;return v(),H("section",cn,[m(s,{gutter:20},{default:i(()=>[m(g,{xs:24,sm:12,lg:8},{default:i(()=>[m(p,{shadow:"hover"},{header:i(()=>[fn]),default:i(()=>[c("div",mn,[m(f,{type:"danger",loading:oe(n),onClick:a},{default:i(()=>[R("\u91CD\u7F6E")]),_:1},8,["loading"])])]),_:1})]),_:1}),m(g,{xs:24,sm:12,lg:8,style:{display:"none"}},{default:i(()=>[m(p,{shadow:"hover"},{header:i(()=>[pn]),default:i(()=>[c("div",vn,[m(f,{type:"danger",loading:oe(n),onClick:l},{default:i(()=>[R("\u91CD\u542F")]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})])}}});export{Mn as default};
